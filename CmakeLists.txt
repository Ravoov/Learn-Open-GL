cmake_minimum_required(VERSION 3.10)
project(main)
include_directories( ${CMAKE_SOURCE_DIR}/include)

include_directories( ${CMAKE_SOURCE_DIR}/)
add_executable(main ${CMAKE_SOURCE_DIR}/src/main.cpp ${CMAKE_SOURCE_DIR}/src/Shader.cpp ${CMAKE_SOURCE_DIR}/src/indexbuffer.cpp ${CMAKE_SOURCE_DIR}/src/vertexbuffer.cpp ${CMAKE_SOURCE_DIR}/src/vertexarray.cpp ${CMAKE_SOURCE_DIR}/src/renderer.cpp ${CMAKE_SOURCE_DIR}/src/Texture.cpp)





set_target_properties(main PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_SOURCE_DIR}/release"
)


target_compile_definitions(main PRIVATE GLEW_STATIC)
# Link the static libraries directly
target_link_libraries(main
    "${CMAKE_SOURCE_DIR}/libs/libglew32d.a"
    "${CMAKE_SOURCE_DIR}/libs/libglfw3.a"
    "${CMAKE_SOURCE_DIR}/stb_image/build/libstb_image.a"

    opengl32
    
)
add_custom_command(TARGET main POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory
    "${CMAKE_SOURCE_DIR}/shaders"
    "${CMAKE_SOURCE_DIR}/release/shaders"
)

# --- NEW COMMAND TO COPY ASSETS ---
# Define the source directory for your assets
set(ASSET_SOURCE_DIR "${CMAKE_SOURCE_DIR}/assets") # Adjust this if your source 'asset.png' is elsewhere

# Define the destination directory for your assets inside the release folder.
# Your C++ code is looking for "asset/asset.png" relative to the executable,
# so we need a subfolder named 'asset' within the release directory.
set(ASSET_DEST_DIR "${CMAKE_SOURCE_DIR}/release/asset")

add_custom_command(TARGET main POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory
    "${ASSET_SOURCE_DIR}"
    "${ASSET_DEST_DIR}"
    COMMENT "Copying assets to release directory"
)